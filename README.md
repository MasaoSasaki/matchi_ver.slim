# アプリ名
matchi(マッチ)<br>
(このリポジトリは[matchi](https://github.com/MasaoSasaki/matchi)のslim学習用コピーです。)

## サイトURL
https://matchi-gourmet.com

## 使用言語・技術
### 言語
HTML/CSS/JavaScript
Ruby 2.5.7

### 技術
#### フレームワーク
Rails 5.2.4
#### ライブラリ
jQuery 1.12.4
#### 外部API
Google(Google Maps Javascript/Geolocation/Geocoding/CloudVision)
#### インフラ
vagrant
AWS(EC2/RDS/Route53/Certificate Manager/ALB/WorkMail)
gem(devise/refile/gon/dotenv)
MySQL 5.7.22

## 設計書
### 機能一覧
https://docs.google.com/spreadsheets/d/1PL8Vu22aXZV1pZ1HRxm-1jaDTiEo3-0xuDglZNBHQAU/edit?usp=sharing
### UI_Flows
https://drive.google.com/file/d/1LztQyxCGOD2N-6csEBf7pIduClr4Nn6e/view?usp=sharing
### ワイヤーフレーム
#### Admin
https://app.diagrams.net/#G1VM1pGoxWLT2YNRkzoPllRSle_7ZphvJJ
#### Restaurant
https://app.diagrams.net/#G1SuIhNph7gwsKGbT5PqGApPnmX2oDUDKx
#### User
https://app.diagrams.net/#G10YV4SXeUFVfdADi93lj3PaYRCEi9UXnX
### ER図
https://drive.google.com/file/d/1hnXInRK9RYaPu5Thr3LIi_D7OeraxxpY/view?usp=sharing
### テーブル定義書
https://docs.google.com/spreadsheets/d/1VMf2UX-NWOjPL_QYcFoSfoyb-yajxOIZCNbMr8Rw3D8/edit?usp=sharing
### アプリケーション詳細設計書
https://docs.google.com/spreadsheets/d/1L9GRDPpyJhKNIP5zVpgR6XrRZwvEIZK7EEckqEJzljw/edit?usp=sharing
### 工程表
https://docs.google.com/spreadsheets/d/1o7G1d2ULM0jHLUxnnvFoi6kzStA8jKAYprJYQZK_cYo/edit#gid=1773513600

## サイトテーマ
飲食店で日々発生する予約キャンセルを有効活用することをテーマにしています。<br>
お客様が予約される段階で飲食店では食材の準備、スタッフの動員などのコストがかかります。<br>
しかし、前日キャンセルや無断キャンセルが発生してしまうと、そこかけたコストは無駄になってしまいます。<br>
キャンセル料などで、無駄になってしまったコストを賄うことはできるかもしれませんが、用意された食材は無駄になってしまい、飲食店としてもそれはできれば避けたいところです。<br>
この両者をマッチングさせて、誰も損をしない仕組みづくりを目指します。<br>

## サイト概要
飲食店と利用者をマッチングするサービス<br>
・ユーザー、レストラン側それぞれのログイン機能<br>
・利用したメニュー、レストランに対してレビュー（コメント機能、評価（数値を☆で表示））、利用されたユーザーに対してレストランからレビュー（レストランレビュー、メニューレビュー、ユーザーレビューの各テーブルを用意）<br>
・ユーザーについたコメントや評価、レストランについたレストランに対するコメントや評価をそれぞれに「信用スコア」として可視化（数値化）、コメントの数値化は4ヶ月目のAI機能追加時に実装予定（評価カラム（integer）をそれぞれ用意）<br>
・クレジットカード（gem: 'PAY.JP for Ruby'で実装、ポートフォリオでは疑似手段を用いる）、または銀行振り込みによる事前決済（任意）、事前決済のメリットは、店舗側はキャンセル料を必ず収納でき、利用者は利用当日に会計が不要になる。<br>
・当サイト利用者が予約キャンセル、無断キャンセルをした場合、予約時のキャンセル規定に応じて信用スコアの減点、強制退会を行う。（強制退会の場合、登録名or電話番号orメールアドレスor住所いずれか2点以上一致を条件に再登録不可とする）（レストラン・ユーザーそれぞれに信用スコアカラム（数値）を用意）<br>
・信用スコアの加点条件→・予約後、来店（サービス提供）が完了する。・ポジティブコメント、ポジティブ評価を付ける（付けられる）。・毎月一定の点数を店舗（ユーザー）に対して別途付与できる。<br>
  減点条件→・予約キャンセル（メニューが定めるキャンセル規定に準ずる）。<br>
・クーポンを配布し値引、割引ができるようにする。<br>
・ブックマークに登録された店舗がメニューを更新した場合、マイページもしくはメールマガジンにてアラートする。<br>
・メニューごとにタグ（通常メニュー、当サイト限定、人数限定、期間限定、数量限定、緊急（前日、当日キャンセルにより発生したメニュー）の6種類を現在想定中）をDBで実装し、タグからの検索も可能にする。（予約状況は同期通信で随時サイトに反映）<br>
・メニューごとに予約ステータス（予約必須、予約可能（予約できるが、飛び込みでもOK、その場合の在庫は保証しない）、予約不可（飛び込みのみで用意））を明記する。予約完了時、双方に確認メールが送信される。<br>
・Geolocation API/Google Maps APIを使って現在地付近の店舗を検索。<br>
・独自ポイントを導入し、各ユーザーにイベントや利用額に応じて付与。サイトから予約時に現金同様に利用可能。<br>

※工数が多く全て実装するにはPF期間1ヶ月で間に合わない可能性があるため、以下の機能はテストデプロイ後、段階的に実装予定です。<br>
・Geolocation実装に伴うHTTPS化タグ機能（DBで実装）<br>
・クレジットカード機能（疑似的）<br>
・クーポン機能<br>
・レビュー機能<br>
・信用スコア機能<br>
詳しくは添付のER図（仮）でも色分けをしていますのでご参照いただけると幸いです。<br>
※今後、グループサービスとして、飲食以外にも予約が発生するようなサービス（美容、宿泊など）へもスケールすることを想定しています。（独自ポイントを各サービス共通化）<br>

### テーマを選んだ理由
近年、飲食店の団体予約の直前キャンセルや無断キャンセルが話題となり、SNSなどで拡散される行為が目に着きます。<br>
本当は、一次予約の段階で無断キャンセルや直前キャンセルをさせない仕組みづくりが必要になると思いますが、やはりどうしても避けられないこともあります。<br>
それらの課題をIT技術やWEB技術を使って解決できないものかと考えておりました。<br>

### ターゲットユーザ
・飲食店：キャンセルで食材を余らせてしまった飲食店が実際のサービスと同価格もしくは廉価でその料理を出品（尚且つ１次予約者からキャンセル料も取れる可能性があるので、廉価が実現可能か？）<br>
・利用者：飲食店がキャンセル待ちで困ったコース料理など、内容としては自分が100%食べたい物ではないが、「通常より廉価で」「飲食店を助ける（社会貢献）」意味合いから応援予約。<br>
・双方：飲食店は食品ロスを抑えることができる。利用者は廉価で料理を食べ、尚且つその飲食店を助けることができる。<br>

### 主な利用シーン
急遽決まったランチ、ディナー、飲み会等でお店を探すときに現在地近くでどこか困っているお店はないか？となることを想定しています。<br>
情報化社会が進み、「料理の味」はどんどんよくなっていくなかで、次に競うのは「料金設定」になるかと思いますが、それもどこも横並びになっているように思います。（もちろん品質や立地によって差はあります。）<br>
そこにもし、「社会貢献」「ピンチを応援する」という要素が目に見える形で加われば、選ばれやすくなるのではないかと想定しています。<br>
